<?xml version="1.0" encoding="UTF-8"?><rss xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:content="http://purl.org/rss/1.0/modules/content/" xmlns:atom="http://www.w3.org/2005/Atom" version="2.0"><channel><title><![CDATA[えやみぐさ RSS Feed]]></title><description><![CDATA[えやみぐさ RSS Feed]]></description><link>https://blog.aoirint.com</link><generator>GatsbyJS</generator><lastBuildDate>Tue, 22 Feb 2022 10:38:03 GMT</lastBuildDate><item><title><![CDATA[No title]]></title><description><![CDATA[えやみぐさ: blog.aoirint.com えやみぐさのGatsby設定ファイルのTypeScript化 レイアウト用の型定義を gatsby-node や gatsby-config で利用するために、これらのGatsby設定ファイルをTypeScript…]]></description><link>https://blog.aoirint.com/entry/2022/log_20220220/</link><guid isPermaLink="false">https://blog.aoirint.com/entry/2022/log_20220220/</guid><pubDate>Sun, 20 Feb 2022 08:10:00 GMT</pubDate><content:encoded>&lt;p&gt;えやみぐさ: blog.aoirint.com&lt;/p&gt;&lt;h2 id=&quot;えやみぐさのgatsby設定ファイルのtypescript化&quot; style=&quot;position:relative&quot;&gt;&lt;a href=&quot;#%E3%81%88%E3%82%84%E3%81%BF%E3%81%90%E3%81%95%E3%81%AEgatsby%E8%A8%AD%E5%AE%9A%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%81%AEtypescript%E5%8C%96&quot; aria-label=&quot;えやみぐさのgatsby設定ファイルのtypescript化 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;えやみぐさのGatsby設定ファイルのTypeScript化&lt;/h2&gt;&lt;p&gt;レイアウト用の型定義を&lt;code&gt;gatsby-node&lt;/code&gt;や&lt;code&gt;gatsby-config&lt;/code&gt;で利用するために、これらのGatsby設定ファイルをTypeScript化することになりました。
以下の記事が参考になりました。&lt;/p&gt;&lt;ul&gt;&lt;li&gt;&lt;a href=&quot;https://miyauchi.dev/ja/posts/gatsby-typescript/&quot;&gt;https://miyauchi.dev/ja/posts/gatsby-typescript/&lt;/a&gt;&lt;/li&gt;&lt;/ul&gt;&lt;h2 id=&quot;えやみぐさにチャンネル機能を追加&quot; style=&quot;position:relative&quot;&gt;&lt;a href=&quot;#%E3%81%88%E3%82%84%E3%81%BF%E3%81%90%E3%81%95%E3%81%AB%E3%83%81%E3%83%A3%E3%83%B3%E3%83%8D%E3%83%AB%E6%A9%9F%E8%83%BD%E3%82%92%E8%BF%BD%E5%8A%A0&quot; aria-label=&quot;えやみぐさにチャンネル機能を追加 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;えやみぐさに「チャンネル」機能を追加&lt;/h2&gt;&lt;p&gt;トピックの異なる記事を分離するために、「チャンネル」という単位で記事を分類するようにしました。&lt;/p&gt;&lt;p&gt;これまで、えやみぐさの記事は、カテゴリとタグによって分類していました。
しかし、この2つだけでは、例えば日記と技術記事の記事一覧を分離することができません（RSSや最近の記事一覧で問題になる）。
えやみぐさに異なるトピック・ジャンルの記事を統合するために、既存のカテゴリとタグによる分類を維持し、新しい階層を加えることにしました。
これまでのカテゴリ・タグは、チャンネル別に機能するようにしました。&lt;/p&gt;&lt;p&gt;いまのところ、この記事は作業ログというチャンネルに属しています。
通常の技術ノートに比べて、気軽にページを作ることができるようにと考えています。
あとで内容の一部を技術ノートに移す・写すこともあるかもしれません。
現在の技術ノートはあまり品質がよくない（メモ書きレベル）ので、作業ログに移してもいいかなと思っているのですが、そこそこ記事数があり、
中身を確認しながら再分類するのが手間なのでやっていません。
作業ログは、作業を中断したり、力尽きたりしたりして、中途半端な内容や矛盾した文章が載っていることがあるかもしれませんが、自分用のメモなので気にしないでいきたいと思っています。&lt;/p&gt;&lt;h2 id=&quot;えやみぐさの記事管理方法とurlフォーマットについて&quot; style=&quot;position:relative&quot;&gt;&lt;a href=&quot;#%E3%81%88%E3%82%84%E3%81%BF%E3%81%90%E3%81%95%E3%81%AE%E8%A8%98%E4%BA%8B%E7%AE%A1%E7%90%86%E6%96%B9%E6%B3%95%E3%81%A8url%E3%83%95%E3%82%A9%E3%83%BC%E3%83%9E%E3%83%83%E3%83%88%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6&quot; aria-label=&quot;えやみぐさの記事管理方法とurlフォーマットについて permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;えやみぐさの記事管理方法とURLフォーマットについて&lt;/h2&gt;&lt;p&gt;えやみぐさでは、記事のURLを&lt;code&gt;entry/&amp;lt;作成年&amp;gt;/&amp;lt;slug&amp;gt;&lt;/code&gt;というフォーマットにしています。
このフォーマットは、えやみぐさの記事をファイルシステム上で管理しやすくするために選んだものです。&lt;/p&gt;&lt;p&gt;えやみぐさの記事を作成するときは、URLと対応したパスにディレクトリを作成し、&lt;code&gt;index.md&lt;/code&gt;ファイルを配置します。
これは、記事に付随するリソース（画像や音声ファイルなど）と記事本体をまとめて管理するためにそうしています。&lt;/p&gt;&lt;p&gt;比較として、&lt;code&gt;entry/&amp;lt;slug&amp;gt;&lt;/code&gt;方式では、ふつうに構成すると1ディレクトリにすべての記事ディレクトリを配置することになります。
例えば、2020年には下書きを含めて31件の記事があるのですが、
次の年も同じ数の記事を書いたとすると、計62件、その次の年なら計93件になることが予想されます。
昔書いた記事に補足を入れたいときや、新しい記事を書きたいときに、100件のサブディレクトリがあるディレクトリを操作するのは、
誤操作が起きやすい点、目に入る情報量が多く気が散る点から、望ましくない・苦手です。&lt;/p&gt;&lt;p&gt;&lt;code&gt;entry/&amp;lt;作成年&amp;gt;/&amp;lt;作成月&amp;gt;/&amp;lt;slug&amp;gt;&lt;/code&gt;や&lt;code&gt;entry/&amp;lt;作成年&amp;gt;/&amp;lt;作成月&amp;gt;/&amp;lt;作成日&amp;gt;/&amp;lt;slug&amp;gt;&lt;/code&gt;も考えられますが、
自分の記事作成ペースと、手作業で管理するのが手間に感じる点から採用しませんでした。&lt;/p&gt;&lt;h2 id=&quot;えやみぐさのurl永続性について&quot; style=&quot;position:relative&quot;&gt;&lt;a href=&quot;#%E3%81%88%E3%82%84%E3%81%BF%E3%81%90%E3%81%95%E3%81%AEurl%E6%B0%B8%E7%B6%9A%E6%80%A7%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6&quot; aria-label=&quot;えやみぐさのurl永続性について permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;えやみぐさのURL永続性について&lt;/h2&gt;&lt;p&gt;インターネット上のURLは、永続化することが望ましいという考え方があります。
例えば、ブックマークしておいたページが消えていると困りますし、リンクが貼られているとリンク切れを起こしてしまいます。&lt;/p&gt;&lt;p&gt;記事のURLの永続化には、URLの割り当て方法が関わってきます。
ブログシステムでのURLの割り当て方法としては、
記事タイトルの一部などによる「スラグ」を利用する方法、
DB上の連番IDを利用する方法、
時刻や日付を利用する方法、
ランダムなIDを利用する方法、
が思い付きます。
えやみぐさでは、記事のURLを&lt;code&gt;entry/&amp;lt;作成年&amp;gt;/&amp;lt;slug&amp;gt;&lt;/code&gt;というフォーマットにしています。&lt;/p&gt;&lt;p&gt;CMS・Wikiなどでは、URLを永続化するためにリダイレクトが自動で貼られる仕組みが用意されている場合がありますが、
えやみぐさのコンテンツ管理方式（GitリポジトリにMarkdownファイル）では、リダイレクトによってURLを永続化するのは難しく、
実装しても運用するのはそれなりの手間になります（例えば、リダイレクトだけの実体のない記事ページが記事ファイル一覧に含まれる、増え続けるリダイレクトリストの管理など）。&lt;/p&gt;&lt;p&gt;できるだけ記事URLを書き換えないようにしてはいますが、リンクが貼られにくい雑記については、
URL永続性を維持する動機がないので、適当に管理すると思います。&lt;/p&gt;&lt;p&gt;記事のURL名前空間は、チャンネル間で共通にしています（&lt;code&gt;entry/slug&lt;/code&gt;のこと）。
えやみぐさでは、チャンネル・カテゴリ・タグのようなタクソノミーは、あとで書き換えることがある、という運用を考えています。&lt;/p&gt;&lt;h2 id=&quot;えやみぐさの記事一覧について&quot; style=&quot;position:relative&quot;&gt;&lt;a href=&quot;#%E3%81%88%E3%82%84%E3%81%BF%E3%81%90%E3%81%95%E3%81%AE%E8%A8%98%E4%BA%8B%E4%B8%80%E8%A6%A7%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6&quot; aria-label=&quot;えやみぐさの記事一覧について permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;えやみぐさの記事一覧について&lt;/h2&gt;&lt;p&gt;これまで、えやみぐさのトップページでは、カテゴリの一覧と、各カテゴリの全記事リストを表示する方式をとっていました。
これは、過去に書いた技術記事を素早く参照するためのものでした。
この記事の執筆時点でも、技術記事用のチャンネル「技術ノート」では、同様の方式で記事一覧を表示するようにしています。&lt;/p&gt;&lt;h2 id=&quot;えやみぐさのデプロイ自動化について&quot; style=&quot;position:relative&quot;&gt;&lt;a href=&quot;#%E3%81%88%E3%82%84%E3%81%BF%E3%81%90%E3%81%95%E3%81%AE%E3%83%87%E3%83%97%E3%83%AD%E3%82%A4%E8%87%AA%E5%8B%95%E5%8C%96%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6&quot; aria-label=&quot;えやみぐさのデプロイ自動化について permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;えやみぐさのデプロイ自動化について&lt;/h2&gt;&lt;p&gt;えやみぐさを管理するGitリポジトリは、Gatsbyプロジェクトリポジトリと記事リポジトリの2つに分かれています（submoduleで管理しています）。
記事の可搬性とレイアウト・記事の分離のためにそうしていますが、固有記法を使うこともあるかもしれませんし、
まああまり細かいところは気にしないで運用しています。&lt;/p&gt;&lt;p&gt;えやみぐさのデプロイは、GatsbyプロジェクトリポジトリにpushされたときにはGitHub Actionsが走りますが、
記事リポジトリにpushされたときには走りません。&lt;/p&gt;&lt;p&gt;記事を更新したときには、親のGatsbyプロジェクトリポジトリのsubmoduleを更新する手間があります。&lt;/p&gt;&lt;p&gt;Webサイトのレイアウトを調整すること、記事を更新すること、をうまく共存させながら、この手間を解消したいのですが、
あんまりいい方法が思い付いていません。。。&lt;/p&gt;&lt;p&gt;例えば、記事を書くときにいちいちGatsbyでレンダリングするのは重くて手間なので、Gatsbyプロジェクトをcloneせずに
記事を追加するような運用をしたいと思っていますが、
レイアウトをいじるときには実際の記事があった方がいい、というような感じで、どうしたらいいのかなと思っています。&lt;/p&gt;&lt;p&gt;&lt;code&gt;workflow_dispatch&lt;/code&gt;をうまく組めば、片方のリポジトリが更新されたときにデプロイ走らせることはできると思うけれど、
ローカルで動かすときに微妙な気がしている...&lt;/p&gt;&lt;h2 id=&quot;えやみぐさのデプロイにおける2重コミット問題を解消した&quot; style=&quot;position:relative&quot;&gt;&lt;a href=&quot;#%E3%81%88%E3%82%84%E3%81%BF%E3%81%90%E3%81%95%E3%81%AE%E3%83%87%E3%83%97%E3%83%AD%E3%82%A4%E3%81%AB%E3%81%8A%E3%81%91%E3%82%8B2%E9%87%8D%E3%82%B3%E3%83%9F%E3%83%83%E3%83%88%E5%95%8F%E9%A1%8C%E3%82%92%E8%A7%A3%E6%B6%88%E3%81%97%E3%81%9F&quot; aria-label=&quot;えやみぐさのデプロイにおける2重コミット問題を解消した permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;えやみぐさのデプロイにおける「2重コミット問題」を解消した&lt;/h2&gt;&lt;p&gt;「2重コミット問題」：テーマリポジトリと記事リポジトリを分離するため、submoduleを使って管理するとき、submoduleと親リポジトリの2つにそれぞれコミットするのが手間になる問題&lt;/p&gt;&lt;p&gt;API経由でWorkflowを実行する。スコープの広いPATが必要なのが難しいところなので、抵抗あったのだけれど、まあ便利なので仕方がない。&lt;/p&gt;&lt;p&gt;Gatsbyが2つのディレクトリを同じデータソースとして統合して扱うことができたので、submoduleを使わずにうまく分離することができた（VOICEVOX ENGINEのspeaker_infoをイメージした）。&lt;/p&gt;&lt;p&gt;このおかげで、ローカルでのプレビューもできる（Gatsbyが重いのでレイアウト変えるとき以外は、多少表示崩れても手間なのでGatsbyでレンダリングしない方がいいと思っているけれど）。&lt;/p&gt;&lt;p&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position:relative;display:block;margin-left:auto;margin-right:auto;max-width:650px&quot;&gt;
      &lt;a class=&quot;gatsby-resp-image-link&quot; href=&quot;/static/9fcdac93255106c1f11cf220bff523ab/236d7/eyamigusa_new_workflow.png&quot; style=&quot;display:block&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;
    &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom:30.061349693251532%;position:relative;bottom:0;left:0;background-image:url(&amp;#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAA6ElEQVQY03VQgW6FIAz0/z9yiXPz+VABFQRKy73A29ySvTVpmt7RK9eOeYM7JhBpvI6C/6KUv1xHNEHd3xDCgBgIeg3Q69nqZhPqjEiBNbFhRodWvaNL9Hd2RDOMGRDOEaUIiATeBxAxOMu1OWdp2JMTCL/+eVdKBpAgQkiRkUlg7YGUGJQEzKWJ1T7FjM0eTbD2VbS+SUkQIze8+z4D56etdfHoe4XbaLAsHt4lOJcap9SO917B6LNZDyfBmoDxU7c573IVLF/H/bHATGDOV+77iVl5qPuBj2HFrBym24YYqzOGFL4sPwBM49S+bsM7rgAAAABJRU5ErkJggg==&amp;#x27;);background-size:cover;display:block&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;eyamigusa new workflow&quot; title=&quot;eyamigusa new workflow&quot; src=&quot;/static/9fcdac93255106c1f11cf220bff523ab/a6d36/eyamigusa_new_workflow.png&quot; srcSet=&quot;/static/9fcdac93255106c1f11cf220bff523ab/222b7/eyamigusa_new_workflow.png 163w,/static/9fcdac93255106c1f11cf220bff523ab/ff46a/eyamigusa_new_workflow.png 325w,/static/9fcdac93255106c1f11cf220bff523ab/a6d36/eyamigusa_new_workflow.png 650w,/static/9fcdac93255106c1f11cf220bff523ab/e548f/eyamigusa_new_workflow.png 975w,/static/9fcdac93255106c1f11cf220bff523ab/3c492/eyamigusa_new_workflow.png 1300w,/static/9fcdac93255106c1f11cf220bff523ab/236d7/eyamigusa_new_workflow.png 1486w&quot; sizes=&quot;(max-width: 650px) 100vw, 650px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;/&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;</content:encoded></item><item><title><![CDATA[VOICEVOX Core 0.5.1をUbuntu + GPU + Pythonで使う（exampleを動かすまで）]]></title><description><![CDATA[VOICEVOX Core 0.5.1をUbuntu + GPU + Pythonで使う（exampleを動かすまで） ※ VOICEVOX Coreにより生成した音声の利用にあたっては、VOICEVOX Coreの添付文書・利用規約を必ず確認し、従ってください。 https…]]></description><link>https://blog.aoirint.com/entry/2021/voicevox_core/</link><guid isPermaLink="false">https://blog.aoirint.com/entry/2021/voicevox_core/</guid><pubDate>Sat, 11 Sep 2021 23:40:00 GMT</pubDate><content:encoded>&lt;h1 id=&quot;voicevox-core-051をubuntu--gpu--pythonで使うexampleを動かすまで&quot; style=&quot;position:relative&quot;&gt;&lt;a href=&quot;#voicevox-core-051%E3%82%92ubuntu--gpu--python%E3%81%A7%E4%BD%BF%E3%81%86example%E3%82%92%E5%8B%95%E3%81%8B%E3%81%99%E3%81%BE%E3%81%A7&quot; aria-label=&quot;voicevox core 051をubuntu  gpu  pythonで使うexampleを動かすまで permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;VOICEVOX Core 0.5.1をUbuntu + GPU + Pythonで使う（exampleを動かすまで）&lt;/h1&gt;&lt;p&gt;&lt;strong&gt;※ VOICEVOX Coreにより生成した音声の利用にあたっては、VOICEVOX Coreの添付文書・利用規約を必ず確認し、従ってください。&lt;/strong&gt;&lt;/p&gt;&lt;ul&gt;&lt;li&gt;&lt;a href=&quot;https://github.com/Hiroshiba/voicevox_core&quot;&gt;https://github.com/Hiroshiba/voicevox_core&lt;/a&gt;&lt;/li&gt;&lt;/ul&gt;&lt;pre&gt;&lt;code&gt;Ubuntu 20.04.3 LTS (Focal Fossa)

Python 3.9.6 (pyenv)

NVIDIA-SMI 470.57.02
Driver Version: 470.57.02
CUDA Version: 11.4

cuDNN 8.2.4
&lt;/code&gt;&lt;/pre&gt;&lt;h2 id=&quot;voicevoxを使った音声合成について&quot; style=&quot;position:relative&quot;&gt;&lt;a href=&quot;#voicevox%E3%82%92%E4%BD%BF%E3%81%A3%E3%81%9F%E9%9F%B3%E5%A3%B0%E5%90%88%E6%88%90%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6&quot; aria-label=&quot;voicevoxを使った音声合成について permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;VOICEVOXを使った音声合成について&lt;/h2&gt;&lt;p&gt;VOICEVOXの音声合成の仕組みについては、以下の記事が参考になるかもしれません。&lt;/p&gt;&lt;ul&gt;&lt;li&gt;&lt;a href=&quot;https://blog.hiroshiba.jp/voicevox-engine-introduction/&quot;&gt;VOICEVOXの音声合成エンジンの紹介 | Hiho&amp;#x27;s Blog&lt;/a&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;VOICEVOX Coreを効果的に使うには、ある程度音声合成の専門知識が必要になると思います。&lt;/p&gt;&lt;p&gt;簡易にTTSを利用したい場合には、VOICEVOX EngineのHTTP APIを使うことをおすすめします。&lt;/p&gt;&lt;ul&gt;&lt;li&gt;&lt;a href=&quot;https://voicevox.github.io/voicevox_engine/api/&quot;&gt;voicevox_engine API Document&lt;/a&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;VOICEVOX Engineは、公式Dockerイメージが公開されています。&lt;/p&gt;&lt;ul&gt;&lt;li&gt;&lt;a href=&quot;https://github.com/Hiroshiba/voicevox_engine&quot;&gt;https://github.com/Hiroshiba/voicevox_engine&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;https://hub.docker.com/r/hiroshiba/voicevox_engine&quot;&gt;https://hub.docker.com/r/hiroshiba/voicevox_engine&lt;/a&gt;&lt;/li&gt;&lt;/ul&gt;&lt;h3 id=&quot;voicevox-coreのインタフェースについて&quot; style=&quot;position:relative&quot;&gt;&lt;a href=&quot;#voicevox-core%E3%81%AE%E3%82%A4%E3%83%B3%E3%82%BF%E3%83%95%E3%82%A7%E3%83%BC%E3%82%B9%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6&quot; aria-label=&quot;voicevox coreのインタフェースについて permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;VOICEVOX Coreのインタフェースについて&lt;/h3&gt;&lt;details&gt;&lt;p&gt;わたしは音声合成については素人ですが、参考のため現在の理解を書いておきます。&lt;/p&gt;&lt;p&gt;VOICEVOX Coreでは、
「音素ごとの長さの推定 &lt;code&gt;replace_phoneme_length / yukarin_s_forward&lt;/code&gt;」、
「モーラごとの音高の推定 &lt;code&gt;replace_mora_pitch / yukarin_sa_forward&lt;/code&gt;」、
「音声波形の推定 &lt;code&gt;synthesis / decode_forward&lt;/code&gt;」の3つの深層学習モデルを使って音声合成します。&lt;/p&gt;&lt;p&gt;OpenJTalkには、辞書に基づいてテキストを解析し、アクセント句・モーラ・アクセント位置・疑問文フラグなどの情報で構成された
フルコンテキストラベルというデータに変換する機能があります。&lt;/p&gt;&lt;p&gt;フルコンテキストラベルの仕様は、以下のURLを開き、
&lt;code&gt;HTS-2.3 &amp;gt; Speaker dependent training demo &amp;gt; Japanese &amp;gt; tar.bz2&lt;/code&gt;から&lt;code&gt;HTS-demo_NIT-ATR503-M001.tar.bz2&lt;/code&gt;をダウンロード・展開し、
&lt;code&gt;data/lab_format.pdf&lt;/code&gt;を見ると英語で記述されています。&lt;/p&gt;&lt;ul&gt;&lt;li&gt;&lt;a href=&quot;https://hts.sp.nitech.ac.jp/?Download#u879c944&quot;&gt;https://hts.sp.nitech.ac.jp/?Download#u879c944&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;https://twitter.com/hiho_karuta/status/1059845813143138304&quot;&gt;https://twitter.com/hiho_karuta/status/1059845813143138304&lt;/a&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;VOICEVOX Engineでは、フルコンテキストラベルやVOICEVOX Coreを使って、
テキストを調声用のデータ構造（AudioQuery）に変換し、
また調声用のデータ構造を音声（Wav）に変換します。&lt;/p&gt;&lt;p&gt;VOICEVOXエディタでは、調声用のデータ構造を操作して、アクセント位置、音高（日本語ではイントネーションと同じらしい）、音素長を調声するUIなどが実装されています。&lt;/p&gt;&lt;/details&gt;&lt;h2 id=&quot;libtorch版とonnx版について&quot; style=&quot;position:relative&quot;&gt;&lt;a href=&quot;#libtorch%E7%89%88%E3%81%A8onnx%E7%89%88%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6&quot; aria-label=&quot;libtorch版とonnx版について permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;LibTorch版とONNX版について&lt;/h2&gt;&lt;p&gt;VOICEVOXは、0.10から深層学習モデル推論時のバックエンドをLibTorchからONNX Runtimeに移行しました。&lt;/p&gt;&lt;p&gt;この記事では、VOICEVOX 0.9までのLibTorch版コアを前提にしています（最初に記事を書いたときは0.5.1でした）。&lt;/p&gt;&lt;p&gt;PythonでONNX版のVOICEVOX Coreを使う手順はリポジトリにドキュメントがあるので参照してください（時間があればそのうち記事を書くかもです）。&lt;/p&gt;&lt;ul&gt;&lt;li&gt;&lt;a href=&quot;https://github.com/VOICEVOX/voicevox_core/tree/f27fd1ca22aa299755d0f646874919a034bc5085#voicevox-core&quot;&gt;https://github.com/VOICEVOX/voicevox_core/tree/f27fd1ca22aa299755d0f646874919a034bc5085#voicevox-core&lt;/a&gt;&lt;/li&gt;&lt;/ul&gt;&lt;h2 id=&quot;libtorchのダウンロード&quot; style=&quot;position:relative&quot;&gt;&lt;a href=&quot;#libtorch%E3%81%AE%E3%83%80%E3%82%A6%E3%83%B3%E3%83%AD%E3%83%BC%E3%83%89&quot; aria-label=&quot;libtorchのダウンロード permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;LibTorchのダウンロード&lt;/h2&gt;&lt;ul&gt;&lt;li&gt;&lt;a href=&quot;https://pytorch.org/&quot;&gt;https://pytorch.org/&lt;/a&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;Stable &amp;gt; Linux &amp;gt; LibTorch &amp;gt; C++/Java &amp;gt; CUDA 11.1 &amp;gt; Download here (cxx11 ABI)&lt;/p&gt;&lt;p&gt;&lt;code&gt;libtorch-cxx11-abi-shared-with-deps-1.9.0+cu111.zip&lt;/code&gt;を使用した。
圧縮時で2.1GB、展開時で5.1GB。&lt;/p&gt;&lt;p&gt;&lt;code&gt;~/local/libtorch&lt;/code&gt;以下に、&lt;code&gt;~/local/libtorch/build-version&lt;/code&gt;のように全ファイルを展開する。&lt;/p&gt;&lt;h2 id=&quot;voicevox-coreのダウンロード&quot; style=&quot;position:relative&quot;&gt;&lt;a href=&quot;#voicevox-core%E3%81%AE%E3%83%80%E3%82%A6%E3%83%B3%E3%83%AD%E3%83%BC%E3%83%89&quot; aria-label=&quot;voicevox coreのダウンロード permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;VOICEVOX Coreのダウンロード&lt;/h2&gt;&lt;ul&gt;&lt;li&gt;&lt;a href=&quot;https://github.com/Hiroshiba/voicevox_core/releases/tag/0.5.1&quot;&gt;https://github.com/Hiroshiba/voicevox_core/releases/tag/0.5.1&lt;/a&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;圧縮時・展開時ともに430MB。&lt;/p&gt;&lt;p&gt;&lt;code&gt;~/local/voicevox_core&lt;/code&gt;以下に、&lt;code&gt;~/local/voicevox_core/libcore.so&lt;/code&gt;のように全ファイルを展開する。&lt;/p&gt;&lt;h2 id=&quot;bashrc&quot; style=&quot;position:relative&quot;&gt;&lt;a href=&quot;#bashrc&quot; aria-label=&quot;bashrc permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;.bashrc&lt;/h2&gt;&lt;pre&gt;&lt;code class=&quot;language-shell&quot;&gt;export LIBRARY_PATH=&amp;quot;$HOME/local/voicevox_core:$LIBRARY_PATH&amp;quot;
export LIBRARY_PATH=&amp;quot;$HOME/local/libtorch/lib:$LIBRARY_PATH&amp;quot;
export LD_LIBRARY_PATH=&amp;quot;$HOME/local/voicevox_core:$LD_LIBRARY_PATH&amp;quot;
export LD_LIBRARY_PATH=&amp;quot;$HOME/local/libtorch/lib:$LD_LIBRARY_PATH&amp;quot;
&lt;/code&gt;&lt;/pre&gt;&lt;pre&gt;&lt;code class=&quot;language-shell&quot;&gt;source ~/.bashrc
&lt;/code&gt;&lt;/pre&gt;&lt;h2 id=&quot;サンプルリポジトリをクローン&quot; style=&quot;position:relative&quot;&gt;&lt;a href=&quot;#%E3%82%B5%E3%83%B3%E3%83%97%E3%83%AB%E3%83%AA%E3%83%9D%E3%82%B8%E3%83%88%E3%83%AA%E3%82%92%E3%82%AF%E3%83%AD%E3%83%BC%E3%83%B3&quot; aria-label=&quot;サンプルリポジトリをクローン permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;サンプルリポジトリをクローン&lt;/h2&gt;&lt;ul&gt;&lt;li&gt;&lt;a href=&quot;https://github.com/Hiroshiba/voicevox_core&quot;&gt;https://github.com/Hiroshiba/voicevox_core&lt;/a&gt;&lt;/li&gt;&lt;/ul&gt;&lt;pre&gt;&lt;code class=&quot;language-shell&quot;&gt;git clone https://github.com/Hiroshiba/voicevox_core.git
cd voicevox_core

# 再現性のためにバージョンを固定、実際は最新版の使用を推奨
git checkout 89d0962ab54269023fe0ec3170c7075744f38702
&lt;/code&gt;&lt;/pre&gt;&lt;h2 id=&quot;corehをコピー&quot; style=&quot;position:relative&quot;&gt;&lt;a href=&quot;#coreh%E3%82%92%E3%82%B3%E3%83%94%E3%83%BC&quot; aria-label=&quot;corehをコピー permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;core.hをコピー&lt;/h2&gt;&lt;pre&gt;&lt;code class=&quot;language-shell&quot;&gt;cp core.h example/python/

cd example/python
&lt;/code&gt;&lt;/pre&gt;&lt;h2 id=&quot;パッケージのインストール&quot; style=&quot;position:relative&quot;&gt;&lt;a href=&quot;#%E3%83%91%E3%83%83%E3%82%B1%E3%83%BC%E3%82%B8%E3%81%AE%E3%82%A4%E3%83%B3%E3%82%B9%E3%83%88%E3%83%BC%E3%83%AB&quot; aria-label=&quot;パッケージのインストール permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;パッケージのインストール&lt;/h2&gt;&lt;pre&gt;&lt;code class=&quot;language-shell&quot;&gt;# 依存パッケージのインストール
pip3 install -r requirements.txt
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&quot;pipを使ったインストール&quot; style=&quot;position:relative&quot;&gt;&lt;a href=&quot;#pip%E3%82%92%E4%BD%BF%E3%81%A3%E3%81%9F%E3%82%A4%E3%83%B3%E3%82%B9%E3%83%88%E3%83%BC%E3%83%AB&quot; aria-label=&quot;pipを使ったインストール permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;pipを使ったインストール&lt;/h3&gt;&lt;pre&gt;&lt;code class=&quot;language-shell&quot;&gt;# coreモジュール（VOICEVOX Core Pythonライブラリ）のインストール
pip3 install .
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&quot;distutilsを使ったインストール&quot; style=&quot;position:relative&quot;&gt;&lt;a href=&quot;#distutils%E3%82%92%E4%BD%BF%E3%81%A3%E3%81%9F%E3%82%A4%E3%83%B3%E3%82%B9%E3%83%88%E3%83%BC%E3%83%AB&quot; aria-label=&quot;distutilsを使ったインストール permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;distutilsを使ったインストール&lt;/h3&gt;&lt;pre&gt;&lt;code class=&quot;language-shell&quot;&gt;# coreモジュール（VOICEVOX Core Pythonライブラリ）のインストール
python3 setup.py install --record files.txt


# 失敗時
python3 setup.py clean
rm -rf build/ core.cpp
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;code&gt;files.txt&lt;/code&gt;にインストールされたファイル一覧が出力される。
アンインストール時は、&lt;code&gt;files.txt&lt;/code&gt;に列挙されたファイルを手動で削除する。&lt;/p&gt;&lt;ul&gt;&lt;li&gt;&lt;a href=&quot;https://qiita.com/orion0616/items/dfe476067e499cca8535&quot;&gt;https://qiita.com/orion0616/items/dfe476067e499cca8535&lt;/a&gt;&lt;/li&gt;&lt;/ul&gt;&lt;h4 id=&quot;filestxt&quot; style=&quot;position:relative&quot;&gt;&lt;a href=&quot;#filestxt&quot; aria-label=&quot;filestxt permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;files.txt&lt;/h4&gt;&lt;pre&gt;&lt;code&gt;***/lib/python3.9/site-packages/core.cpython-39-x86_64-linux-gnu.so
***/lib/python3.9/site-packages/core-0.0.0-py3.9.egg-info
&lt;/code&gt;&lt;/pre&gt;&lt;h2 id=&quot;サンプルプログラムrunpyの改変&quot; style=&quot;position:relative&quot;&gt;&lt;a href=&quot;#%E3%82%B5%E3%83%B3%E3%83%97%E3%83%AB%E3%83%97%E3%83%AD%E3%82%B0%E3%83%A9%E3%83%A0runpy%E3%81%AE%E6%94%B9%E5%A4%89&quot; aria-label=&quot;サンプルプログラムrunpyの改変 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;サンプルプログラム（run.py）の改変&lt;/h2&gt;&lt;p&gt;&lt;code&gt;core.initialize&lt;/code&gt;の第1引数を&lt;code&gt;libcore.so&lt;/code&gt;のあるディレクトリのパスに変更する。（末尾のスラッシュは必須）。&lt;/p&gt;&lt;pre&gt;&lt;code class=&quot;language-python&quot;&gt;    core.initialize(&amp;quot;/home/user/local/voicevox_core/&amp;quot;, use_gpu)
&lt;/code&gt;&lt;/pre&gt;&lt;h2 id=&quot;改変したサンプルプログラムrunpyの実行&quot; style=&quot;position:relative&quot;&gt;&lt;a href=&quot;#%E6%94%B9%E5%A4%89%E3%81%97%E3%81%9F%E3%82%B5%E3%83%B3%E3%83%97%E3%83%AB%E3%83%97%E3%83%AD%E3%82%B0%E3%83%A9%E3%83%A0runpy%E3%81%AE%E5%AE%9F%E8%A1%8C&quot; aria-label=&quot;改変したサンプルプログラムrunpyの実行 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;改変したサンプルプログラム（run.py）の実行&lt;/h2&gt;&lt;h3 id=&quot;四国めたん&quot; style=&quot;position:relative&quot;&gt;&lt;a href=&quot;#%E5%9B%9B%E5%9B%BD%E3%82%81%E3%81%9F%E3%82%93&quot; aria-label=&quot;四国めたん permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;四国めたん&lt;/h3&gt;&lt;pre&gt;&lt;code class=&quot;language-shell&quot;&gt;python3 run.py --use_gpu --text &amp;quot;こんにちは&amp;quot; --speaker_id 0

paplay &amp;quot;./こんにちは-0.wav&amp;quot;
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&quot;ずんだもん&quot; style=&quot;position:relative&quot;&gt;&lt;a href=&quot;#%E3%81%9A%E3%82%93%E3%81%A0%E3%82%82%E3%82%93&quot; aria-label=&quot;ずんだもん permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;ずんだもん&lt;/h3&gt;&lt;pre&gt;&lt;code class=&quot;language-shell&quot;&gt;python3 run.py --use_gpu --text &amp;quot;こんにちはなのだ&amp;quot; --speaker_id 1

paplay &amp;quot;./こんにちはなのだ-0.wav&amp;quot;
&lt;/code&gt;&lt;/pre&gt;&lt;h2 id=&quot;使用するgpuの変更複数台のgpuが接続された環境&quot; style=&quot;position:relative&quot;&gt;&lt;a href=&quot;#%E4%BD%BF%E7%94%A8%E3%81%99%E3%82%8Bgpu%E3%81%AE%E5%A4%89%E6%9B%B4%E8%A4%87%E6%95%B0%E5%8F%B0%E3%81%AEgpu%E3%81%8C%E6%8E%A5%E7%B6%9A%E3%81%95%E3%82%8C%E3%81%9F%E7%92%B0%E5%A2%83&quot; aria-label=&quot;使用するgpuの変更複数台のgpuが接続された環境 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;使用するGPUの変更（複数台のGPUが接続された環境）&lt;/h2&gt;&lt;p&gt;CUDAを使うアプリケーション一般に適用できる方法。数値は&lt;code&gt;nvidia-smi&lt;/code&gt;で確認できるGPU番号とは異なることがあるので注意。&lt;/p&gt;&lt;pre&gt;&lt;code class=&quot;language-shell&quot;&gt;CUDA_VISIBLE_DEVICES=0 python3 run.py --use_gpu --text &amp;quot;こんにちは&amp;quot; --speaker_id 0
CUDA_VISIBLE_DEVICES=1 python3 run.py --use_gpu --text &amp;quot;こんにちは&amp;quot; --speaker_id 0
&lt;/code&gt;&lt;/pre&gt;&lt;h2 id=&quot;その他参考&quot; style=&quot;position:relative&quot;&gt;&lt;a href=&quot;#%E3%81%9D%E3%81%AE%E4%BB%96%E5%8F%82%E8%80%83&quot; aria-label=&quot;その他参考 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;その他参考&lt;/h2&gt;&lt;p&gt;&lt;code&gt;LD_LIBRARY_PATH&lt;/code&gt;について調べていたが、コンパイル（&lt;code&gt;python3 setup.py install&lt;/code&gt;）時に必要（&lt;code&gt;g++&lt;/code&gt;が見に行くパス）なのは&lt;code&gt;LIBRARY_PATH&lt;/code&gt;、実行時（&lt;code&gt;core&lt;/code&gt;モジュールロード時）に必要なのは&lt;code&gt;LD_LIBRARY_PATH&lt;/code&gt;ということらしかった。&lt;/p&gt;&lt;ul&gt;&lt;li&gt;&lt;a href=&quot;https://bettamodoki.hatenadiary.jp/entry/20121121/1353480891&quot;&gt;https://bettamodoki.hatenadiary.jp/entry/20121121/1353480891&lt;/a&gt;&lt;/li&gt;&lt;/ul&gt;&lt;hr/&gt;&lt;ul&gt;&lt;li&gt;&lt;a href=&quot;https://atmarkit.itmedia.co.jp/flinux/rensai/linuxtips/a115makeerror.html&quot;&gt;https://atmarkit.itmedia.co.jp/flinux/rensai/linuxtips/a115makeerror.html&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;https://please-sleep.cou929.nu/20080718.html&quot;&gt;https://please-sleep.cou929.nu/20080718.html&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;https://qiita.com/Esfahan/items/0064d845ca6faf7f3d47&quot;&gt;https://qiita.com/Esfahan/items/0064d845ca6faf7f3d47&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;https://qiita.com/kazatsuyu/items/5c8d9f539cd925fda007&quot;&gt;https://qiita.com/kazatsuyu/items/5c8d9f539cd925fda007&lt;/a&gt;&lt;/li&gt;&lt;/ul&gt;</content:encoded><atom:updated>Thu, 03 Feb 2022 10:30:00 GMT</atom:updated></item><item><title><![CDATA[MediaWikiのセットアップ]]></title><description><![CDATA[MediaWikiのセットアップ インストール Docker Hub公式のDockerイメージが公開されている。 Mediawiki - Official Image | Docker Hub 事前準備 docker-compose.yml nginx設定ファイル (/etc…]]></description><link>https://blog.aoirint.com/entry/2022/mediawiki_docker/</link><guid isPermaLink="false">https://blog.aoirint.com/entry/2022/mediawiki_docker/</guid><pubDate>Thu, 03 Feb 2022 07:00:00 GMT</pubDate><content:encoded>&lt;h1 id=&quot;mediawikiのセットアップ&quot; style=&quot;position:relative&quot;&gt;&lt;a href=&quot;#mediawiki%E3%81%AE%E3%82%BB%E3%83%83%E3%83%88%E3%82%A2%E3%83%83%E3%83%97&quot; aria-label=&quot;mediawikiのセットアップ permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;MediaWikiのセットアップ&lt;/h1&gt;&lt;h2 id=&quot;インストール&quot; style=&quot;position:relative&quot;&gt;&lt;a href=&quot;#%E3%82%A4%E3%83%B3%E3%82%B9%E3%83%88%E3%83%BC%E3%83%AB&quot; aria-label=&quot;インストール permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;インストール&lt;/h2&gt;&lt;p&gt;Docker Hub公式のDockerイメージが公開されている。&lt;/p&gt;&lt;ul&gt;&lt;li&gt;&lt;a href=&quot;https://hub.docker.com/_/mediawiki/&quot;&gt;Mediawiki - Official Image | Docker Hub&lt;/a&gt;&lt;/li&gt;&lt;/ul&gt;&lt;h3 id=&quot;事前準備&quot; style=&quot;position:relative&quot;&gt;&lt;a href=&quot;#%E4%BA%8B%E5%89%8D%E6%BA%96%E5%82%99&quot; aria-label=&quot;事前準備 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;事前準備&lt;/h3&gt;&lt;h4 id=&quot;docker-composeyml&quot; style=&quot;position:relative&quot;&gt;&lt;a href=&quot;#docker-composeyml&quot; aria-label=&quot;docker composeyml permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;docker-compose.yml&lt;/h4&gt;&lt;pre&gt;&lt;code class=&quot;language-yaml&quot;&gt;version: &amp;#x27;3.8&amp;#x27;
services:
  mediawiki:
    image: mediawiki:1.37
    restart: always
    ports:
      - &amp;#x27;127.0.0.1:8000:80&amp;#x27;
    links:
      - database
    volumes:
      - ./app/images:/var/www/html/images
      # After initial setup, download LocalSettings.php to the same directory as
      # this yaml and uncomment the following line and use compose to restart
      # the mediawiki service
      # - ./LocalSettings.php:/var/www/html/LocalSettings.php
      # - ./app/extensions:/var/www/html/extensions
  # This key also defines the name of the database host used during setup instead of the default &amp;quot;localhost&amp;quot;
  database:
    image: mariadb:10.7
    restart: always
    volumes:
      - database-data:/var/lib/mysql
    environment:
      # @see https://phabricator.wikimedia.org/source/mediawiki/browse/master/includes/DefaultSettings.php
      MYSQL_DATABASE: my_wiki
      MYSQL_USER: wikiuser
      MYSQL_PASSWORD: example
      MYSQL_RANDOM_ROOT_PASSWORD: &amp;#x27;yes&amp;#x27;
volumes:
  database-data:
&lt;/code&gt;&lt;/pre&gt;&lt;h4 id=&quot;nginx設定ファイル-etcnginxsites-enabledwikiexamplecomconf&quot; style=&quot;position:relative&quot;&gt;&lt;a href=&quot;#nginx%E8%A8%AD%E5%AE%9A%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB-etcnginxsites-enabledwikiexamplecomconf&quot; aria-label=&quot;nginx設定ファイル etcnginxsites enabledwikiexamplecomconf permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;nginx設定ファイル (/etc/nginx/sites-enabled/wiki.example.com.conf）&lt;/h4&gt;&lt;pre&gt;&lt;code class=&quot;language-nginx&quot;&gt;server {
    server_name wiki.example.com;

    proxy_set_header HOST $host;
    proxy_set_header X-Real-IP $remote_addr;
    proxy_set_header X-Forwarded-Host $host;
    proxy_set_header X-Forwarded-Server $host;
    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;

    # auth_basic &amp;quot;Authentication Required&amp;quot;;
    # auth_basic_user_file /path/to/.htpasswd;

    location / {
        proxy_pass http://localhost:8000;
    }
}
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&quot;手順&quot; style=&quot;position:relative&quot;&gt;&lt;a href=&quot;#%E6%89%8B%E9%A0%86&quot; aria-label=&quot;手順 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;手順&lt;/h3&gt;&lt;ol&gt;&lt;li&gt;docker-compose.yml、nginx設定ファイルを作成&lt;ul&gt;&lt;li&gt;必要に応じて&lt;code&gt;sudo certbot --nginx&lt;/code&gt;でHTTPS対応&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;li&gt;添付ファイルのアップロード先ディレクトリを作成 &lt;code&gt;mkdir -p app/images&lt;/code&gt;&lt;/li&gt;&lt;li&gt;&lt;code&gt;docker-compose up -d&lt;/code&gt;でMediaWikiを起動&lt;ul&gt;&lt;li&gt;起動時に&lt;code&gt;wikiexamplecom_mediawiki_1 is up-to-date&lt;/code&gt;のようなログが表示されるので、&lt;code&gt;is&lt;/code&gt;より前のMediaWikiコンテナ名を控える&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;li&gt;ブラウザから初期設定&lt;/li&gt;&lt;li&gt;設定ファイル&lt;code&gt;LocalSettings.php&lt;/code&gt;をコピー&lt;ul&gt;&lt;li&gt;&lt;code&gt;sudo docker cp MediaWikiコンテナ名:/var/www/html/LocalSettings.php ./LocalSettings.php&lt;/code&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;li&gt;拡張機能をコピー&lt;ul&gt;&lt;li&gt;&lt;code&gt;sudo docker cp MediaWikiコンテナ名:/var/www/html/extensions ./app/extensions&lt;/code&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;li&gt;docker-compose.ymlを開き、&lt;code&gt;./LocalSettings.php&lt;/code&gt;、&lt;code&gt;./app/extensions&lt;/code&gt;のコメントアウトを解除&lt;/li&gt;&lt;li&gt;コンテナを再作成&lt;ul&gt;&lt;li&gt;&lt;code&gt;sudo docker-compose up -d --force-recreate&lt;/code&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;/ol&gt;&lt;h2 id=&quot;拡張機能のインストール&quot; style=&quot;position:relative&quot;&gt;&lt;a href=&quot;#%E6%8B%A1%E5%BC%B5%E6%A9%9F%E8%83%BD%E3%81%AE%E3%82%A4%E3%83%B3%E3%82%B9%E3%83%88%E3%83%BC%E3%83%AB&quot; aria-label=&quot;拡張機能のインストール permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;拡張機能のインストール&lt;/h2&gt;&lt;h3 id=&quot;手順-1&quot; style=&quot;position:relative&quot;&gt;&lt;a href=&quot;#%E6%89%8B%E9%A0%86-1&quot; aria-label=&quot;手順 1 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;手順&lt;/h3&gt;&lt;ol&gt;&lt;li&gt;拡張機能の配布ファイル（tar.gz）をサーバにダウンロード&lt;/li&gt;&lt;li&gt;配布ファイルを展開&lt;/li&gt;&lt;li&gt;展開した拡張機能ディレクトリを&lt;code&gt;app/extensions&lt;/code&gt;以下にコピー（&lt;code&gt;app/extensions/Math&lt;/code&gt;のように）&lt;ul&gt;&lt;li&gt;Dockerコンテナ内では&lt;code&gt;/var/www/html/extensions/Math&lt;/code&gt;のように配置される&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;li&gt;&lt;code&gt;LocalSettings.php&lt;/code&gt;に&lt;code&gt;wfLoadExtension( &amp;#x27;拡張機能ディレクトリ名&amp;#x27; );&lt;/code&gt;のように追記&lt;ul&gt;&lt;li&gt;&lt;code&gt;wfLoadExtension( &amp;#x27;Math&amp;#x27; );&lt;/code&gt;&lt;/li&gt;&lt;li&gt;&lt;code&gt;wfLoadExtension( &amp;#x27;SyntaxHighlight_GeSHi&amp;#x27; );&lt;/code&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;li&gt;「メンテナンス：再起動」を実行&lt;/li&gt;&lt;li&gt;「メンテナンス：データベース構造の更新」を実行&lt;/li&gt;&lt;/ol&gt;&lt;h3 id=&quot;数式math&quot; style=&quot;position:relative&quot;&gt;&lt;a href=&quot;#%E6%95%B0%E5%BC%8Fmath&quot; aria-label=&quot;数式math permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;数式（Math）&lt;/h3&gt;&lt;ul&gt;&lt;li&gt;&lt;a href=&quot;https://www.mediawiki.org/wiki/Extension:Math&quot;&gt;Extension:Math - MediaWiki&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;https://www.mediawiki.org/wiki/Special:ExtensionDistributor/Math&quot;&gt;Download MediaWiki extension - MediaWiki&lt;/a&gt;&lt;/li&gt;&lt;/ul&gt;&lt;h3 id=&quot;シンタックスハイライトsyntaxhighlight&quot; style=&quot;position:relative&quot;&gt;&lt;a href=&quot;#%E3%82%B7%E3%83%B3%E3%82%BF%E3%83%83%E3%82%AF%E3%82%B9%E3%83%8F%E3%82%A4%E3%83%A9%E3%82%A4%E3%83%88syntaxhighlight&quot; aria-label=&quot;シンタックスハイライトsyntaxhighlight permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;シンタックスハイライト（SyntaxHighlight）&lt;/h3&gt;&lt;ul&gt;&lt;li&gt;&lt;a href=&quot;https://www.mediawiki.org/wiki/Extension:SyntaxHighlight&quot;&gt;Extension:SyntaxHighlight - MediaWiki&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;https://www.mediawiki.org/wiki/Special:ExtensionDistributor/SyntaxHighlight_GeSHi&quot;&gt;Download MediaWiki extension - MediaWiki&lt;/a&gt;&lt;/li&gt;&lt;/ul&gt;&lt;h2 id=&quot;設定&quot; style=&quot;position:relative&quot;&gt;&lt;a href=&quot;#%E8%A8%AD%E5%AE%9A&quot; aria-label=&quot;設定 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;設定&lt;/h2&gt;&lt;h3 id=&quot;ロゴを変更&quot; style=&quot;position:relative&quot;&gt;&lt;a href=&quot;#%E3%83%AD%E3%82%B4%E3%82%92%E5%A4%89%E6%9B%B4&quot; aria-label=&quot;ロゴを変更 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;ロゴを変更&lt;/h3&gt;&lt;h4 id=&quot;localsettingsphp&quot; style=&quot;position:relative&quot;&gt;&lt;a href=&quot;#localsettingsphp&quot; aria-label=&quot;localsettingsphp permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;LocalSettings.php&lt;/h4&gt;&lt;pre&gt;&lt;code class=&quot;language-php&quot;&gt;## The URL paths to the logo.  Make sure you change this from the default,
## or else you&amp;#x27;ll overwrite your logo when you upgrade!
#$wgLogos = [ &amp;#x27;1x&amp;#x27; =&amp;gt; &amp;quot;$wgResourceBasePath/resources/assets/wiki.png&amp;quot; ];
$wgLogos = [ &amp;#x27;1x&amp;#x27; =&amp;gt; &amp;quot;$wgResourceBasePath/images/logo.png&amp;quot; ];
&lt;/code&gt;&lt;/pre&gt;&lt;h4 id=&quot;手順-2&quot; style=&quot;position:relative&quot;&gt;&lt;a href=&quot;#%E6%89%8B%E9%A0%86-2&quot; aria-label=&quot;手順 2 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;手順&lt;/h4&gt;&lt;ol&gt;&lt;li&gt;LocalSettings.phpを編集&lt;/li&gt;&lt;li&gt;ロゴ画像を&lt;code&gt;app/images/logo.png&lt;/code&gt;に配置&lt;/li&gt;&lt;li&gt;「メンテナンス：再起動」を実行&lt;/li&gt;&lt;/ol&gt;&lt;h3 id=&quot;既定のタイムゾーンを変更&quot; style=&quot;position:relative&quot;&gt;&lt;a href=&quot;#%E6%97%A2%E5%AE%9A%E3%81%AE%E3%82%BF%E3%82%A4%E3%83%A0%E3%82%BE%E3%83%BC%E3%83%B3%E3%82%92%E5%A4%89%E6%9B%B4&quot; aria-label=&quot;既定のタイムゾーンを変更 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;既定のタイムゾーンを変更&lt;/h3&gt;&lt;ul&gt;&lt;li&gt;&lt;a href=&quot;https://www.mediawiki.org/wiki/Manual:Timezone&quot;&gt;Manual:Timezone - MediaWiki&lt;/a&gt;&lt;/li&gt;&lt;/ul&gt;&lt;h4 id=&quot;localsettingsphp-1&quot; style=&quot;position:relative&quot;&gt;&lt;a href=&quot;#localsettingsphp-1&quot; aria-label=&quot;localsettingsphp 1 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;LocalSettings.php&lt;/h4&gt;&lt;pre&gt;&lt;code class=&quot;language-php&quot;&gt;# Time zone
#$wgLocaltimezone = &amp;quot;UTC&amp;quot;;
$wgLocaltimezone = &amp;quot;Asia/Tokyo&amp;quot;;
&lt;/code&gt;&lt;/pre&gt;&lt;h4 id=&quot;手順-3&quot; style=&quot;position:relative&quot;&gt;&lt;a href=&quot;#%E6%89%8B%E9%A0%86-3&quot; aria-label=&quot;手順 3 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;手順&lt;/h4&gt;&lt;ol&gt;&lt;li&gt;LocalSettings.phpを編集&lt;/li&gt;&lt;li&gt;「メンテナンス：再起動」を実行&lt;/li&gt;&lt;/ol&gt;&lt;h2 id=&quot;メンテナンス&quot; style=&quot;position:relative&quot;&gt;&lt;a href=&quot;#%E3%83%A1%E3%83%B3%E3%83%86%E3%83%8A%E3%83%B3%E3%82%B9&quot; aria-label=&quot;メンテナンス permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;メンテナンス&lt;/h2&gt;&lt;h3 id=&quot;再起動&quot; style=&quot;position:relative&quot;&gt;&lt;a href=&quot;#%E5%86%8D%E8%B5%B7%E5%8B%95&quot; aria-label=&quot;再起動 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;再起動&lt;/h3&gt;&lt;pre&gt;&lt;code class=&quot;language-bash&quot;&gt;sudo docker-compose up -d --force-recreate
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&quot;データベース構造の更新&quot; style=&quot;position:relative&quot;&gt;&lt;a href=&quot;#%E3%83%87%E3%83%BC%E3%82%BF%E3%83%99%E3%83%BC%E3%82%B9%E6%A7%8B%E9%80%A0%E3%81%AE%E6%9B%B4%E6%96%B0&quot; aria-label=&quot;データベース構造の更新 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;データベース構造の更新&lt;/h3&gt;&lt;ul&gt;&lt;li&gt;&lt;a href=&quot;https://www.mediawiki.org/wiki/Manual:Update.php&quot;&gt;Manual:update.php - MediaWiki&lt;/a&gt;&lt;/li&gt;&lt;/ul&gt;&lt;pre&gt;&lt;code class=&quot;language-bash&quot;&gt;sudo docker-compose exec -u 1000 mediawiki php maintenance/update.php
&lt;/code&gt;&lt;/pre&gt;</content:encoded></item><item><title><![CDATA[OBS Studio on Ubuntu 20.04 + NVIDIA GPUでWindow Captureを動作させる]]></title><description><![CDATA[OBS Studio on Ubuntu 20.04 + NVIDIA GPUでWindow Captureを動作させる Bug Report - [SOLVED] Window Capture Black Screen | OBS Forums Ubuntu + NVIDIA…]]></description><link>https://blog.aoirint.com/entry/2020/obs_ubuntu_nvidia_window_capture/</link><guid isPermaLink="false">https://blog.aoirint.com/entry/2020/obs_ubuntu_nvidia_window_capture/</guid><pubDate>Mon, 09 Nov 2020 06:10:00 GMT</pubDate><content:encoded>&lt;h1 id=&quot;obs-studio-on-ubuntu-2004--nvidia-gpuでwindow-captureを動作させる&quot; style=&quot;position:relative&quot;&gt;&lt;a href=&quot;#obs-studio-on-ubuntu-2004--nvidia-gpu%E3%81%A7window-capture%E3%82%92%E5%8B%95%E4%BD%9C%E3%81%95%E3%81%9B%E3%82%8B&quot; aria-label=&quot;obs studio on ubuntu 2004  nvidia gpuでwindow captureを動作させる permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;OBS Studio on Ubuntu 20.04 + NVIDIA GPUでWindow Captureを動作させる&lt;/h1&gt;&lt;ul&gt;&lt;li&gt;&lt;a href=&quot;https://obsproject.com/forum/threads/solved-window-capture-black-screen.47082/&quot;&gt;Bug Report - [SOLVED] Window Capture Black Screen | OBS Forums&lt;/a&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;Ubuntu + NVIDIA GPU環境では、OBS StudioでWindow Captureしようとすると
一部のアプリケーションで黒画面の表示になり動作しない。
おそらくOpenGLで描画しているものが対象。&lt;/p&gt;&lt;p&gt;いくつか対処法の候補がある。&lt;/p&gt;&lt;ul&gt;&lt;li&gt;Alt+F2から&lt;code&gt;r&lt;/code&gt;を入力して実行&lt;/li&gt;&lt;li&gt;アプリケーションをフルスクリーン表示からウインドウ表示に切り替える&lt;/li&gt;&lt;li&gt;アプリケーションをウインドウ表示からフルスクリーン表示に切り替える&lt;/li&gt;&lt;li&gt;&lt;code&gt;Window Capture (Xcomposite)&lt;/code&gt;の設定欄をスクロールして、&lt;code&gt;Use alpha-less texture format (Mesa workaround)&lt;/code&gt;にチェックを入れる&lt;/li&gt;&lt;li&gt;OSを再起動（GPUドライバに更新が入ったときなど）&lt;/li&gt;&lt;/ul&gt;</content:encoded><atom:updated>Sun, 23 Jan 2022 11:50:00 GMT</atom:updated></item><item><title><![CDATA[Makefile Tips]]></title><description><![CDATA[Makefile Tips Makefileのあるディレクトリの絶対パスを取得する $(pwd) や相対パスでは、 make コマンドの実行ディレクトリが基準になってしまう。 Makefile の実体があるディレクトリを基準としたいときは、以下のようにROOT_DIR…]]></description><link>https://blog.aoirint.com/entry/2021/makefile_tips/</link><guid isPermaLink="false">https://blog.aoirint.com/entry/2021/makefile_tips/</guid><pubDate>Thu, 01 Jul 2021 13:00:00 GMT</pubDate><content:encoded>&lt;h1 id=&quot;makefile-tips&quot; style=&quot;position:relative&quot;&gt;&lt;a href=&quot;#makefile-tips&quot; aria-label=&quot;makefile tips permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Makefile Tips&lt;/h1&gt;&lt;h2 id=&quot;makefileのあるディレクトリの絶対パスを取得する&quot; style=&quot;position:relative&quot;&gt;&lt;a href=&quot;#makefile%E3%81%AE%E3%81%82%E3%82%8B%E3%83%87%E3%82%A3%E3%83%AC%E3%82%AF%E3%83%88%E3%83%AA%E3%81%AE%E7%B5%B6%E5%AF%BE%E3%83%91%E3%82%B9%E3%82%92%E5%8F%96%E5%BE%97%E3%81%99%E3%82%8B&quot; aria-label=&quot;makefileのあるディレクトリの絶対パスを取得する permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Makefileのあるディレクトリの絶対パスを取得する&lt;/h2&gt;&lt;p&gt;&lt;code&gt;$(pwd)&lt;/code&gt;や相対パスでは、&lt;code&gt;make&lt;/code&gt;コマンドの実行ディレクトリが基準になってしまう。&lt;code&gt;Makefile&lt;/code&gt;の実体があるディレクトリを基準としたいときは、以下のようにROOT_DIRを定義する。&lt;/p&gt;&lt;pre&gt;&lt;code class=&quot;language-makefile&quot;&gt;ROOT_DIR = $(dir $(realpath $(firstword $(MAKEFILE_LIST))))
&lt;/code&gt;&lt;/pre&gt;&lt;h2 id=&quot;エラー時に処理を続行する&quot; style=&quot;position:relative&quot;&gt;&lt;a href=&quot;#%E3%82%A8%E3%83%A9%E3%83%BC%E6%99%82%E3%81%AB%E5%87%A6%E7%90%86%E3%82%92%E7%B6%9A%E8%A1%8C%E3%81%99%E3%82%8B&quot; aria-label=&quot;エラー時に処理を続行する permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;エラー時に処理を続行する&lt;/h2&gt;&lt;p&gt;コマンドの前に&lt;code&gt;-&lt;/code&gt;（ハイフン）をつける。&lt;/p&gt;&lt;pre&gt;&lt;code class=&quot;language-makefile&quot;&gt;.PHONY: cmd
cmd:
    ls
    -fail_command a b c
    ls
&lt;/code&gt;&lt;/pre&gt;&lt;h2 id=&quot;インデントはスペースではなくタブを使う&quot; style=&quot;position:relative&quot;&gt;&lt;a href=&quot;#%E3%82%A4%E3%83%B3%E3%83%87%E3%83%B3%E3%83%88%E3%81%AF%E3%82%B9%E3%83%9A%E3%83%BC%E3%82%B9%E3%81%A7%E3%81%AF%E3%81%AA%E3%81%8F%E3%82%BF%E3%83%96%E3%82%92%E4%BD%BF%E3%81%86&quot; aria-label=&quot;インデントはスペースではなくタブを使う permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;インデントはスペースではなくタブを使う&lt;/h2&gt;&lt;p&gt;vimrcで&lt;code&gt;set expandtab&lt;/code&gt;している場合にひっかかる。&lt;/p&gt;&lt;p&gt;以下で一時的に解除するか、vimrcで&lt;code&gt;set expandtab&lt;/code&gt;するのをやめる、もしくはvimrcでファイル名による分岐で設定する。&lt;/p&gt;&lt;pre&gt;&lt;code class=&quot;language-vim&quot;&gt;:set noexpandtab
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&quot;vimrc&quot; style=&quot;position:relative&quot;&gt;&lt;a href=&quot;#vimrc&quot; aria-label=&quot;vimrc permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;.vimrc&lt;/h3&gt;&lt;pre&gt;&lt;code class=&quot;language-vim&quot;&gt;set expandtab

let _filename = expand(&amp;#x27;%:r&amp;#x27;)
if _filename == &amp;#x27;Makefile&amp;#x27;
  set noexpandtab
endif
&lt;/code&gt;&lt;/pre&gt;&lt;ul&gt;&lt;li&gt;&lt;a href=&quot;https://qiita.com/Lacty/items/23a89d2b999cb0e9fae1&quot;&gt;vimでMakefileだけTabスペースではなくTabとして入力する - Qiita&lt;/a&gt;&lt;/li&gt;&lt;/ul&gt;&lt;h2 id=&quot;ファイルの存在に関係なくターゲットを実行する&quot; style=&quot;position:relative&quot;&gt;&lt;a href=&quot;#%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%81%AE%E5%AD%98%E5%9C%A8%E3%81%AB%E9%96%A2%E4%BF%82%E3%81%AA%E3%81%8F%E3%82%BF%E3%83%BC%E3%82%B2%E3%83%83%E3%83%88%E3%82%92%E5%AE%9F%E8%A1%8C%E3%81%99%E3%82%8B&quot; aria-label=&quot;ファイルの存在に関係なくターゲットを実行する permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;ファイルの存在に関係なくターゲットを実行する&lt;/h2&gt;&lt;p&gt;Makeは本来Cのコンパイルなどに使うとき、ターゲット名に一致するファイルが存在している場合に処理をスキップするようになっている。&lt;/p&gt;&lt;p&gt;一方で、&lt;code&gt;build&lt;/code&gt;というターゲット名を使って、呼び出しのたびにコマンドを実行したいが、&lt;code&gt;build&lt;/code&gt;ディレクトリが存在するような場合に困る。&lt;/p&gt;&lt;p&gt;スキップさせないようにするには、&lt;code&gt;.PHONY: ターゲット名&lt;/code&gt;を記述する。&lt;/p&gt;&lt;pre&gt;&lt;code class=&quot;language-makefile&quot;&gt;.PHONY: cmd
cmd:
    ls
&lt;/code&gt;&lt;/pre&gt;&lt;h2 id=&quot;複数のコマンドを1つのシェルで実行する&quot; style=&quot;position:relative&quot;&gt;&lt;a href=&quot;#%E8%A4%87%E6%95%B0%E3%81%AE%E3%82%B3%E3%83%9E%E3%83%B3%E3%83%89%E3%82%921%E3%81%A4%E3%81%AE%E3%82%B7%E3%82%A7%E3%83%AB%E3%81%A7%E5%AE%9F%E8%A1%8C%E3%81%99%E3%82%8B&quot; aria-label=&quot;複数のコマンドを1つのシェルで実行する permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;複数のコマンドを1つのシェルで実行する&lt;/h2&gt;&lt;pre&gt;&lt;code class=&quot;language-makefile&quot;&gt;cmd:
    echo Hello;\
    VAR=World;\
    echo $$VAR
&lt;/code&gt;&lt;/pre&gt;&lt;pre&gt;&lt;code class=&quot;language-makefile&quot;&gt;.ONESHELL: cmd
cmd:
    echo &amp;quot;Hello&amp;quot;
    VAR=World
    echo $$VAR
&lt;/code&gt;&lt;/pre&gt;&lt;h2 id=&quot;途中のコマンドの終了ステータスを返す&quot; style=&quot;position:relative&quot;&gt;&lt;a href=&quot;#%E9%80%94%E4%B8%AD%E3%81%AE%E3%82%B3%E3%83%9E%E3%83%B3%E3%83%89%E3%81%AE%E7%B5%82%E4%BA%86%E3%82%B9%E3%83%86%E3%83%BC%E3%82%BF%E3%82%B9%E3%82%92%E8%BF%94%E3%81%99&quot; aria-label=&quot;途中のコマンドの終了ステータスを返す permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;途中のコマンドの終了ステータスを返す&lt;/h2&gt;&lt;ul&gt;&lt;li&gt;&lt;a href=&quot;https://stackoverflow.com/a/44324918&quot;&gt;https://stackoverflow.com/a/44324918&lt;/a&gt;&lt;/li&gt;&lt;/ul&gt;&lt;pre&gt;&lt;code class=&quot;language-makefile&quot;&gt;.ONESHELL: cmd
.PHONY: cmd
cmd:
    sh -c &amp;#x27;exit 123&amp;#x27;
    EXIT_CODE=$$?
    echo &amp;quot;Exit code: $$EXIT_CODE&amp;quot;
    exit $$EXIT_CODE
&lt;/code&gt;&lt;/pre&gt;</content:encoded><atom:updated>Fri, 14 Jan 2022 22:40:00 GMT</atom:updated></item><item><title><![CDATA[Ubuntu 20.04, ネットワーク設定変更時の認証を回避する]]></title><description><![CDATA[Ubuntu 20.04, ネットワーク設定変更時の認証を回避する Ubuntu 20.04にアップデートしてから、ネットワーク設定の変更時（接続のON/OFFなど）に System policy prevents control of network connections…]]></description><link>https://blog.aoirint.com/entry/2021/ubuntu_disable_network_change_auth/</link><guid isPermaLink="false">https://blog.aoirint.com/entry/2021/ubuntu_disable_network_change_auth/</guid><pubDate>Mon, 29 Nov 2021 20:30:00 GMT</pubDate><content:encoded>&lt;h1 id=&quot;ubuntu-2004-ネットワーク設定変更時の認証を回避する&quot; style=&quot;position:relative&quot;&gt;&lt;a href=&quot;#ubuntu-2004-%E3%83%8D%E3%83%83%E3%83%88%E3%83%AF%E3%83%BC%E3%82%AF%E8%A8%AD%E5%AE%9A%E5%A4%89%E6%9B%B4%E6%99%82%E3%81%AE%E8%AA%8D%E8%A8%BC%E3%82%92%E5%9B%9E%E9%81%BF%E3%81%99%E3%82%8B&quot; aria-label=&quot;ubuntu 2004 ネットワーク設定変更時の認証を回避する permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Ubuntu 20.04, ネットワーク設定変更時の認証を回避する&lt;/h1&gt;&lt;p&gt;Ubuntu 20.04にアップデートしてから、ネットワーク設定の変更時（接続のON/OFFなど）に&lt;code&gt;System policy prevents control of network connections&lt;/code&gt;と表示され、認証を要求されるようになりました。&lt;/p&gt;&lt;p&gt;ここまではまだいいのですが、認証が表示されるたびに数秒間デスクトップがハングする状態になっていて、ストレスでした。
Keyringのロックを解除するときも数秒間ハングするので、似た原因がありそうです。&lt;/p&gt;&lt;p&gt;ひとまず、設定変更時の認証を要求されないようにして、ハングを防ぐことを試みました。結果として試みは成功し、ハングを回避できるようになりました。&lt;/p&gt;&lt;ul&gt;&lt;li&gt;&lt;a href=&quot;https://unix.stackexchange.com/questions/534469/system-policy-prevents-control-of-network-connections&quot;&gt;https://unix.stackexchange.com/questions/534469/system-policy-prevents-control-of-network-connections&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;https://code.luasoftware.com/tutorials/linux/ubuntu-prompt-system-policy-prevents-modification-of-network-settings-for-all-users/&quot;&gt;https://code.luasoftware.com/tutorials/linux/ubuntu-prompt-system-policy-prevents-modification-of-network-settings-for-all-users/&lt;/a&gt;&lt;/li&gt;&lt;/ul&gt;&lt;h2 id=&quot;etcpolkit-1localauthority50-locald50-allow-network-managerpkla&quot; style=&quot;position:relative&quot;&gt;&lt;a href=&quot;#etcpolkit-1localauthority50-locald50-allow-network-managerpkla&quot; aria-label=&quot;etcpolkit 1localauthority50 locald50 allow network managerpkla permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;/etc/polkit-1/localauthority/50-local.d/50-allow-network-manager.pkla&lt;/h2&gt;&lt;pre&gt;&lt;code class=&quot;language-pkla&quot;&gt;[Allow Network Manager all Users]
Identity=unix-user:*
Action=org.freedesktop.NetworkManager.settings.modify.system;org.freedesktop.NetworkManager.network-control
ResultAny=no
ResultInactive=no
ResultActive=yes
&lt;/code&gt;&lt;/pre&gt;&lt;pre&gt;&lt;code class=&quot;language-shell&quot;&gt;systemctl restart network-manager.service
&lt;/code&gt;&lt;/pre&gt;</content:encoded><atom:updated>Mon, 29 Nov 2021 20:30:00 GMT</atom:updated></item><item><title><![CDATA[Ubuntu, CUDAを入れたあとにSteamが起動しない]]></title><description><![CDATA[Ubuntu, CUDAを入れたあとにSteamが起動しない https://qiita.com/yakitatata/items/b2203f90defcad68bb9f NVIDIAドライバのrunfile…]]></description><link>https://blog.aoirint.com/entry/2021/ubuntu_steam_with_cuda/</link><guid isPermaLink="false">https://blog.aoirint.com/entry/2021/ubuntu_steam_with_cuda/</guid><pubDate>Thu, 18 Nov 2021 23:50:00 GMT</pubDate><content:encoded>&lt;h1 id=&quot;ubuntu-cudaを入れたあとにsteamが起動しない&quot; style=&quot;position:relative&quot;&gt;&lt;a href=&quot;#ubuntu-cuda%E3%82%92%E5%85%A5%E3%82%8C%E3%81%9F%E3%81%82%E3%81%A8%E3%81%ABsteam%E3%81%8C%E8%B5%B7%E5%8B%95%E3%81%97%E3%81%AA%E3%81%84&quot; aria-label=&quot;ubuntu cudaを入れたあとにsteamが起動しない permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Ubuntu, CUDAを入れたあとにSteamが起動しない&lt;/h1&gt;&lt;ul&gt;&lt;li&gt;&lt;a href=&quot;https://qiita.com/yakitatata/items/b2203f90defcad68bb9f&quot;&gt;https://qiita.com/yakitatata/items/b2203f90defcad68bb9f&lt;/a&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;NVIDIAドライバのrunfileをダウンロードする（インストール済みのバージョンと合わせる）。&lt;/p&gt;&lt;ul&gt;&lt;li&gt;ドライバ: &lt;a href=&quot;https://www.nvidia.co.jp/Download/Find.aspx?lang=jp&quot;&gt;https://www.nvidia.co.jp/Download/Find.aspx?lang=jp&lt;/a&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;ディレクトリに展開する。&lt;/p&gt;&lt;pre&gt;&lt;code class=&quot;language-shell&quot;&gt;chmod +x NVIDIA-Linux-x86_64-495.29.05.run
./NVIDIA-Linux-x86_64-495.29.05.run -x

sudo chown -R root:root NVIDIA-Linux-x86_64-495.29.05/
sudo mv NVIDIA-Linux-x86_64-495.29.05 /opt/
&lt;/code&gt;&lt;/pre&gt;&lt;h2 id=&quot;etcldsoconfdnvidia-32bitconf&quot; style=&quot;position:relative&quot;&gt;&lt;a href=&quot;#etcldsoconfdnvidia-32bitconf&quot; aria-label=&quot;etcldsoconfdnvidia 32bitconf permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;/etc/ld.so.conf.d/nvidia-32bit.conf&lt;/h2&gt;&lt;p&gt;32bitライブラリの入ったディレクトリをldに読み込ませるようにする。&lt;/p&gt;&lt;pre&gt;&lt;code&gt;/opt/NVIDIA-Linux-x86_64-495.29.05/32
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;再起動する。&lt;/p&gt;&lt;pre&gt;&lt;code class=&quot;language-shell&quot;&gt;sudo ldconfig

sudo reboot
&lt;/code&gt;&lt;/pre&gt;</content:encoded></item><item><title><![CDATA[Hexo]]></title><description><![CDATA[Hexo https://hexo.io/docs/#Installation hexo init <folder> は空のディレクトリに対して実行する必要がある。
いったん仮のディレクトリを作ってからコピーする。 .github 、 .gitignore…]]></description><link>https://blog.aoirint.com/entry/2021/hexo/</link><guid isPermaLink="false">https://blog.aoirint.com/entry/2021/hexo/</guid><pubDate>Wed, 17 Nov 2021 04:00:00 GMT</pubDate><content:encoded>&lt;h1 id=&quot;hexo&quot; style=&quot;position:relative&quot;&gt;&lt;a href=&quot;#hexo&quot; aria-label=&quot;hexo permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Hexo&lt;/h1&gt;&lt;ul&gt;&lt;li&gt;&lt;a href=&quot;https://hexo.io/docs/#Installation&quot;&gt;https://hexo.io/docs/#Installation&lt;/a&gt;&lt;/li&gt;&lt;/ul&gt;&lt;pre&gt;&lt;code class=&quot;language-shell&quot;&gt;npm install -g hexo-cli
&lt;/code&gt;&lt;/pre&gt;&lt;pre&gt;&lt;code class=&quot;language-shell&quot;&gt;$ hexo help
Usage: hexo &amp;lt;command&amp;gt;

Commands:
  help     Get help on a command.
  init     Create a new Hexo folder.
  version  Display version information.

Global Options:
  --config  Specify config file instead of using _config.yml
  --cwd     Specify the CWD
  --debug   Display all verbose messages in the terminal
  --draft   Display draft posts
  --safe    Disable all plugins and scripts
  --silent  Hide output on console

For more help, you can use &amp;#x27;hexo help [command]&amp;#x27; for the detailed information
or you can check the docs: http://hexo.io/docs/
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;code&gt;hexo init &amp;lt;folder&amp;gt;&lt;/code&gt;は空のディレクトリに対して実行する必要がある。
いったん仮のディレクトリを作ってからコピーする。&lt;code&gt;.github&lt;/code&gt;、&lt;code&gt;.gitignore&lt;/code&gt;ファイルがあるのでコピー忘れに注意。&lt;/p&gt;&lt;ul&gt;&lt;li&gt;&lt;a href=&quot;https://hexo.io/docs/setup&quot;&gt;https://hexo.io/docs/setup&lt;/a&gt;&lt;/li&gt;&lt;/ul&gt;&lt;pre&gt;&lt;code class=&quot;language-shell&quot;&gt;$ hexo init .
FATAL ~/git/vent.aoirint.com not empty, please run `hexo init` on an empty folder and then copy your files into it
FATAL {
  err: Error: target not empty
...
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ローカルサーバーを起動する。&lt;/p&gt;&lt;pre&gt;&lt;code class=&quot;language-shell&quot;&gt;hexo server
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;テーマをlightに変更する。&lt;/p&gt;&lt;ul&gt;&lt;li&gt;&lt;a href=&quot;https://github.com/hexojs/hexo-theme-light&quot;&gt;https://github.com/hexojs/hexo-theme-light&lt;/a&gt;&lt;/li&gt;&lt;/ul&gt;&lt;pre&gt;&lt;code class=&quot;language-shell&quot;&gt;git clone --depth 1 https://github.com/hexojs/hexo-theme-light themes/light
&lt;/code&gt;&lt;/pre&gt;&lt;pre&gt;&lt;code class=&quot;language-yaml&quot;&gt;# _config.yml
theme: light
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;静的ファイルを生成する。&lt;/p&gt;&lt;pre&gt;&lt;code class=&quot;language-shell&quot;&gt;hexo generate
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;GitHub上のgh-pagesブランチにデプロイする設定をする。&lt;/p&gt;&lt;ul&gt;&lt;li&gt;&lt;a href=&quot;https://hexo.io/docs/one-command-deployment.html&quot;&gt;https://hexo.io/docs/one-command-deployment.html&lt;/a&gt;&lt;/li&gt;&lt;/ul&gt;&lt;pre&gt;&lt;code class=&quot;language-shell&quot;&gt;npm install hexo-deployer-git
&lt;/code&gt;&lt;/pre&gt;&lt;pre&gt;&lt;code class=&quot;language-yaml&quot;&gt;deploy:
  type: git
  repo: https://github.com/myuser/myrepo
  branch: gh-pages
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;生成した静的ファイルをデプロイする。&lt;/p&gt;&lt;pre&gt;&lt;code class=&quot;language-shell&quot;&gt;hexo deploy
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;記事を限定公開化するhiddenオプションをfront-matterに追加する。&lt;/p&gt;&lt;ul&gt;&lt;li&gt;&lt;a href=&quot;https://prokou.caitsith.info/hexo/setup.html#%E8%A8%98%E4%BA%8B%E3%82%92%E9%9A%A0%E3%81%99&quot;&gt;https://prokou.caitsith.info/hexo/setup.html#%E8%A8%98%E4%BA%8B%E3%82%92%E9%9A%A0%E3%81%99&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;https://github.com/prinsss/hexo-hide-posts&quot;&gt;https://github.com/prinsss/hexo-hide-posts&lt;/a&gt;&lt;/li&gt;&lt;/ul&gt;&lt;pre&gt;&lt;code class=&quot;language-shell&quot;&gt;npm install hexo-hide-posts
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;外部リンクにnoreferrerを追加する。&lt;/p&gt;&lt;ul&gt;&lt;li&gt;&lt;a href=&quot;https://github.com/hexojs/hexo-filter-nofollow&quot;&gt;https://github.com/hexojs/hexo-filter-nofollow&lt;/a&gt;&lt;/li&gt;&lt;/ul&gt;&lt;pre&gt;&lt;code&gt;npm install hexo-filter-nofollow
&lt;/code&gt;&lt;/pre&gt;</content:encoded></item><item><title><![CDATA[GNOME Shell Extension おすすめ]]></title><description><![CDATA[GNOME Shell Extension おすすめ Pixel Saver ウインドウを最大化したとき、macOSのようにタイトルバーをタスクバーに統合。 https://extensions.gnome.org/extension/723/pixel-saver/ https…]]></description><link>https://blog.aoirint.com/entry/2021/gnome_shell_extension/</link><guid isPermaLink="false">https://blog.aoirint.com/entry/2021/gnome_shell_extension/</guid><pubDate>Sun, 14 Nov 2021 11:30:00 GMT</pubDate><content:encoded>&lt;h1 id=&quot;gnome-shell-extension-おすすめ&quot; style=&quot;position:relative&quot;&gt;&lt;a href=&quot;#gnome-shell-extension-%E3%81%8A%E3%81%99%E3%81%99%E3%82%81&quot; aria-label=&quot;gnome shell extension おすすめ permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;GNOME Shell Extension おすすめ&lt;/h1&gt;&lt;h2 id=&quot;pixel-saver&quot; style=&quot;position:relative&quot;&gt;&lt;a href=&quot;#pixel-saver&quot; aria-label=&quot;pixel saver permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Pixel Saver&lt;/h2&gt;&lt;p&gt;ウインドウを最大化したとき、macOSのようにタイトルバーをタスクバーに統合。&lt;/p&gt;&lt;ul&gt;&lt;li&gt;&lt;a href=&quot;https://extensions.gnome.org/extension/723/pixel-saver/&quot;&gt;https://extensions.gnome.org/extension/723/pixel-saver/&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;https://github.com/pixel-saver/pixel-saver&quot;&gt;https://github.com/pixel-saver/pixel-saver&lt;/a&gt;&lt;/li&gt;&lt;/ul&gt;&lt;pre&gt;&lt;code class=&quot;language-shell&quot;&gt;sudo apt install gnome-shell-extension-pixelsaver
&lt;/code&gt;&lt;/pre&gt;&lt;h2 id=&quot;gtile&quot; style=&quot;position:relative&quot;&gt;&lt;a href=&quot;#gtile&quot; aria-label=&quot;gtile permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;gTile&lt;/h2&gt;&lt;p&gt;画面にウインドウを割り付けるメニュー。&lt;/p&gt;&lt;ul&gt;&lt;li&gt;&lt;a href=&quot;https://extensions.gnome.org/extension/28/gtile/&quot;&gt;https://extensions.gnome.org/extension/28/gtile/&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;https://github.com/gTile/gTile&quot;&gt;https://github.com/gTile/gTile&lt;/a&gt;&lt;/li&gt;&lt;/ul&gt;&lt;h2 id=&quot;add-to-desktop&quot; style=&quot;position:relative&quot;&gt;&lt;a href=&quot;#add-to-desktop&quot; aria-label=&quot;add to desktop permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Add to Desktop&lt;/h2&gt;&lt;p&gt;デスクトップにショートカット（&lt;code&gt;*.desktop&lt;/code&gt;ファイル）を作成するメニュー。&lt;/p&gt;&lt;ul&gt;&lt;li&gt;&lt;a href=&quot;https://extensions.gnome.org/extension/3240/add-to-desktop/&quot;&gt;https://extensions.gnome.org/extension/3240/add-to-desktop/&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;https://github.com/Tommimon/add-to-desktop&quot;&gt;https://github.com/Tommimon/add-to-desktop&lt;/a&gt;&lt;/li&gt;&lt;/ul&gt;&lt;h2 id=&quot;screenshot-locations&quot; style=&quot;position:relative&quot;&gt;&lt;a href=&quot;#screenshot-locations&quot; aria-label=&quot;screenshot locations permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Screenshot Locations&lt;/h2&gt;&lt;p&gt;スクリーンショットの保存先ディレクトリを変更するメニュー（GNOME Tweaksから設定）。&lt;/p&gt;&lt;ul&gt;&lt;li&gt;&lt;a href=&quot;https://extensions.gnome.org/extension/1179/screenshot-locations/&quot;&gt;https://extensions.gnome.org/extension/1179/screenshot-locations/&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;https://codeberg.org/kiyui/gnome-shell-screenshotlocations-extension&quot;&gt;https://codeberg.org/kiyui/gnome-shell-screenshotlocations-extension&lt;/a&gt;&lt;/li&gt;&lt;/ul&gt;&lt;h2 id=&quot;sound-input--output-device-chooser&quot; style=&quot;position:relative&quot;&gt;&lt;a href=&quot;#sound-input--output-device-chooser&quot; aria-label=&quot;sound input  output device chooser permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Sound input &amp;amp; output device chooser&lt;/h2&gt;&lt;p&gt;電源メニューに音声デバイス選択を追加。&lt;/p&gt;&lt;ul&gt;&lt;li&gt;&lt;a href=&quot;https://extensions.gnome.org/extension/906/sound-output-device-chooser/&quot;&gt;https://extensions.gnome.org/extension/906/sound-output-device-chooser/&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;https://github.com/kgshank/gse-sound-output-device-chooser&quot;&gt;https://github.com/kgshank/gse-sound-output-device-chooser&lt;/a&gt;&lt;/li&gt;&lt;/ul&gt;</content:encoded></item><item><title><![CDATA[editorコマンドで起動するエディタを変更する（Ubuntu）]]></title><description><![CDATA[editorコマンドで起動するエディタを変更する（Ubuntu） https://unix.stackexchange.com/a/204896]]></description><link>https://blog.aoirint.com/entry/2021/editor_command_ubuntu/</link><guid isPermaLink="false">https://blog.aoirint.com/entry/2021/editor_command_ubuntu/</guid><pubDate>Sat, 13 Nov 2021 19:45:00 GMT</pubDate><content:encoded>&lt;h1 id=&quot;editorコマンドで起動するエディタを変更するubuntu&quot; style=&quot;position:relative&quot;&gt;&lt;a href=&quot;#editor%E3%82%B3%E3%83%9E%E3%83%B3%E3%83%89%E3%81%A7%E8%B5%B7%E5%8B%95%E3%81%99%E3%82%8B%E3%82%A8%E3%83%87%E3%82%A3%E3%82%BF%E3%82%92%E5%A4%89%E6%9B%B4%E3%81%99%E3%82%8Bubuntu&quot; aria-label=&quot;editorコマンドで起動するエディタを変更するubuntu permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;editorコマンドで起動するエディタを変更する（Ubuntu）&lt;/h1&gt;&lt;ul&gt;&lt;li&gt;&lt;a href=&quot;https://unix.stackexchange.com/a/204896&quot;&gt;https://unix.stackexchange.com/a/204896&lt;/a&gt;&lt;/li&gt;&lt;/ul&gt;&lt;pre&gt;&lt;code class=&quot;language-shell&quot;&gt;sudo update-alternatives --config editor
&lt;/code&gt;&lt;/pre&gt;</content:encoded></item></channel></rss>